<!--
/**
* shelly-spotprice-se
* 
* https://github.com/david-nossebro/shelly-spotprice-se
*
* Special thanks to Jussi isotalo who created the original repo
* available here:
* https://github.com/jisotalo/shelly-porssisahko
* https://github.com/jisotalo/shelly-porssisahko-en
* 
* License: GNU Affero General Public License v3.0 
*/
-->
<div id="cfg-l" class="tc">Loading...</div>
<div id="cfg" style="display: none;">
  <div class="tc b" style="font-size: 1.2em;">COMMON SETTINGS</div>
  <table class="m cc">
    <tr>
      <td>Country</td>
      <td>
        <select id="g">
          <option value="SE1">Sweden (SE01)</option>
          <option value="SE2">Sweden (SE02)</option>
          <option value="SE3">Sweden (SE03)</option>
          <option value="SE4">Sweden (SE04)</option>
        </select>
      </td>
    </tr>
    <tr>
      <td class="w180">VAT</td>
      <td>
        <input type="text" id="vat" size="3"> %
      </td>
    </tr>
    <tr>
      <td>Transfer fees</td>
      <td>
        06-22: <input type="text" id="day" size="3"> <span class="price-unit">c/kWh</span>
        <div class="mt10">
          22-06: <input type="text" id="night" size="3"> <span class="price-unit">c/kWh</span>
        </div>
      </td>
    </tr>
  </table>

  <div class="tc mt10 b" style="font-size: 1.2em;">CONTROL #<span id="ci"></span></div>
  <table class="m cc">
    <tr>
      <td class="w180">Enabled</td>
      <td>
        <label><input type="checkbox" id="en"> ON/OFF</label>
      </td>
    </tr>
    <tr>
      <td>Name</td>
      <td>
        <input type="text" id="n">
      </td>
    </tr>
    <tr>
      <td>Mode</td>
      <td>
        <select id="mode">
        </select>
      </td>
    </tr>
    <tr>
      <td>Shelly outputs</td>
      <td>
        <input type="text" id="outs" size="4">
      </td>
    </tr>
    <tr>
      <td>Write outputs</td>
      <td>
        <select id="oc">
          <option value="0">Always</option>
          <option value="1">On-change</option>
        </select>
      </td>
    </tr>
    <tr>
      <td>Control minutes</td>
      <td>
        <input type="text" id="min" size="3"> min
      </td>
    </tr>
    <tr>
      <td>Inverted</td>
      <td>
        <input type="checkbox" id="inv">
      </td>
    </tr>
    <tr>
      <td>Backup hours</td>
      <td id="bk"></td>
    </tr>
    <tr>
      <td>Emergency</td>
      <td>
        <label><input type="checkbox" id="err"> ON/OFF</label>
      </td>
    </tr>
    <tr>
      <td>Overrides</td>
      <td>
        <details class="ml5">
          <summary>Show/hide</summary>
          <table id="fh" class="sm mt10"></table>
        </details>
      </td>
    </tr>
  </table>

  <div class="mt10 b">MANUAL MODE</div>
  <table class="m cc">
    <tr>
      <td class="w180">Output</td>
      <td>
        <label><input type="checkbox" id="m0-cmd"> ON/OFF</label>
      </td>
    </tr>
  </table>

  <div class="mt10 b">PRICE LIMIT</div>
  <table class="m cc">
    <tr>
      <td class="w180">Price limit</td>
      <td>
        <input type="text" id="m1-lim" size="3"> <span class="price-unit">SEK/kWh</span>
      </td>
    </tr>
  </table>

  <div class="mt10 b">CHEAPEST HOURS</div>
  <table class="m cc">
    <tr>
      <td class="w180">Time period</td>
      <td>
        <select id="m2-per">
          <option value="24">24h</option>
          <option value="12">12h</option>
          <option value="8">8h</option>
          <option value="6">6h</option>
          <option value="4">4h</option>
          <option value="3">3h</option>
          <option value="2">2h</option>
          <option value="-1">custom (1 period)</option>
          <option value="-2">custom (2 periods)</option>
        </select>

        <span class="h">
          time range:
        </span>
      </td>
    </tr>
    <tr class="m2-c">
      <td>Custom</td>
      <td>
        <input type="text" id="m2-ps" size="3">:00 - <input type="text" id="m2-pe" size="3">:00
      </td>
    </tr>
    <tr>
      <td>Hour count</td>
      <td>
        <input type="text" id="m2-cnt" size="3"> h
      </td>
    </tr>
    <tr class="m2-c2">
      <td>Custom 2</td>
      <td>
        <input type="text" id="m2-ps2" size="3">:00 - <input type="text" id="m2-pe2" size="3">:00
      </td>
    </tr>
    <tr class="m2-c2">
      <td>Hour count 2</td>
      <td>
        <input type="text" id="m2-cnt2" size="3"> h
      </td>
    </tr>
    <tr>
      <td>Sequential</td>
      <td>
        <input type="checkbox" id="m2-sq">
      </td>
    </tr>
    <tr>
      <td>Always on limit</td>
      <td>
        <input type="text" size="3" id="m2-lim"> <span class="price-unit">SEK/kWh</span>
      </td>
    </tr>
    <tr>
      <td>Max. price limit</td>
      <td>
        <input type="text" size="3" id="m2-m"> <span class="price-unit">SEK/kWh</span>
      </td>
    </tr>
  </table>
  <div class="tc mt10">
    <input id="save" type="button" value="Save">
  </div>

  <div class="tc mt10 b">COMMANDS</div>
  <div class="tc">
    <input class="mt10" type="button" id="force" value="Manual override"><br>
    <input class="mt10" type="button" onclick="window.open(`/`)" value="Shelly WebUI">
  </div>
</div>

<script>
  reqJs("tab-config.js");
</script>